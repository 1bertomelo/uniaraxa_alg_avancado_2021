<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
   
</head>

<body>
    <h1>Lista de tarefas</h1>
    <h4>Cadastre suas tarefas</h4>
    <input type="text" id="nomeTarefa" placeholder="Nome da tarefa" /> <br /><br />
    <input type="number" id="prioridadeTarefa" placeholder="Prioridade" /> <br /><br />
    <input type="date" id="dataTarefa" /> <br /><br />

    <button onclick="cadastrarTarefas()">Cadastrar Tarefa</button> <br /><br />

    <button onclick="ordenarNome()">Ordenação Nome</button> <br /><br />

    <button onclick="ordenarNomeDesc()">Ordenação Nome Descendente</button> <br /><br />

    <button onclick="ordenarPrioridade()">Ordenação Prioridade</button>
    <br />
    <br />
    <button onclick="ordenarPrioridadeDesc()">Ordenação Prioridade Desc</button>

    <script>

        var listaTarefas = [];

        function cadastrarTarefas() {
            let nomeTarefa = document.getElementById('nomeTarefa').value;
            let prioridadeTarefa = parseInt(document.getElementById('prioridadeTarefa').value);
            let dataTarefa = new Date(document.getElementById('dataTarefa').value);
           
           //dica pro exercicio 2
/*            console.log('ano digitado');
            console.log(dataTarefa.getFullYear());
            console.log('mes digitado');
            console.log(dataTarefa.getMonth());
            //mes considera 0 - 11 
            let dataAtual = new Date();
            console.log(dataAtual);
            console.log('ano atual');
            console.log(dataAtual.getFullYear());
            console.log('mes atual');
            console.log(dataAtual.getMonth());
*/
            //criando nova tarefa
            let novaTarefa = { nomeTarefa, prioridadeTarefa, dataTarefa };
            //armazenar no array
            listaTarefas.push(novaTarefa);
            //console.log(listaTarefas);
            imprimirTabela(listaTarefas);
        }


        //logica da ordenacao
        function ordenacaoNumerica(tarefaA, tarefaB) {
            //10 > 8 retonar 1 --> sort troca de lugar 
            // 8 vim antes do 10
            if (tarefaA.prioridadeTarefa > tarefaB.prioridadeTarefa)             
                return 1;

            //7 <8 -1 --> sort ja ta na ordem nao precisa trocar
            if (tarefaA.prioridadeTarefa < tarefaB.prioridadeTarefa)
                return -1;
           
            return 0;

            //if regrinha comandos de bloco cuja escopo so tem uma linha
            //voce pode omitir as chaves
        }

        function ordenarPrioridade() {
            imprimirTabela(listaTarefas.sort(ordenacaoNumerica));

        }

        function ordernacaoString(tarefaA, tarefaB) {
            //lógica da ordem ascendente
            if (tarefaA.nomeTarefa > tarefaB.nomeTarefa)
                return 1;
            if (tarefaA.nomeTarefa < tarefaB.nomeTarefa)
                return -1;
            return 0;
        }

        function ordenacaoStringDesc(tarefaA, tarefaB){
            //solucao
            //lógica da ordem desccendente
            //dica: e a logica invesa da ascendente
            if (tarefaA.nomeTarefa < tarefaB.nomeTarefa)
                return 1;
            if (tarefaA.nomeTarefa > tarefaB.nomeTarefa)
                return -1;
            return 0;

        }

        function ordenaNumericaDesc(tarefaA, tarefaB){
            //solucao
            //dica: e a logica invesa da ascendente
            if (tarefaA.prioridadeTarefa < tarefaB.prioridadeTarefa)             
                return 1;

            //7 <8 -1 --> sort ja ta na ordem nao precisa trocar
            if (tarefaA.prioridadeTarefa > tarefaB.prioridadeTarefa)
                return -1;
           
            return 0;
        }

        function ordenarNome() {

            imprimirTabela(listaTarefas.sort(ordernacaoString));
           // generate_table(listaTarefas);
        }

        function ordenarNomeDesc(){
            imprimirTabela(listaTarefas.sort(ordenacaoStringDesc));
        }

        function ordenarPrioridadeDesc(){
            imprimirTabela(listaTarefas.sort(ordenaNumericaDesc));
        }
        
        function imprimirTabela(tabela){
            var body = document.getElementsByTagName("body")[0];
            var tabelaAuxiliar = document.getElementById("tbTarefas");
            if(tabelaAuxiliar != null){
                tabelaAuxiliar.remove();
            }

            var tabelaPrioridadeHTML = document.createElement("table"); 
            tabelaPrioridadeHTML.id = "tbTarefas";
            var tabelaBody = document.createElement("tbody");
            var tabelaHead = document.createElement("thead");
            
            var linhaCabecalhoHTML = document.createElement("tr");
            
            var colunaCabecalhoNomeHTML = document.createElement("td");
            var conteudoCabecalhoNome = document.createTextNode('Nome Tarefa');
            colunaCabecalhoNomeHTML.appendChild(conteudoCabecalhoNome);
            linhaCabecalhoHTML.appendChild(colunaCabecalhoNomeHTML);


            var colunaCabecalhoPrioHTML = document.createElement("td");
            var conteudoCabecalhoPrio = document.createTextNode('Prioridade');
            colunaCabecalhoPrioHTML.appendChild(conteudoCabecalhoPrio);
            linhaCabecalhoHTML.appendChild(colunaCabecalhoPrioHTML);

            var colunaCabecalhoDataHTML = document.createElement("td");
            var conteudoCabecalhoData = document.createTextNode('Data Tarefa');
            colunaCabecalhoDataHTML.appendChild(conteudoCabecalhoData);
            linhaCabecalhoHTML.appendChild(colunaCabecalhoDataHTML);

            tabelaHead.appendChild(linhaCabecalhoHTML);  
            
            //for para criar n tarefas
            //10 tarefas 10 tr
            //5 tarefas 5 tr
            for(let nrolinha = 0; nrolinha < tabela.length; nrolinha++){
                var linhaHTML = document.createElement("tr");

                var colunaNomeHTML = document.createElement("td");
                var conteudoNome = document.createTextNode(tabela[nrolinha].nomeTarefa);
                colunaNomeHTML.appendChild(conteudoNome);
                linhaHTML.appendChild(colunaNomeHTML);   
                

                var colunaPrioridadeHTML = document.createElement("td");
                var conteudoPrioridade = document.createTextNode(tabela[nrolinha].prioridadeTarefa);
                colunaPrioridadeHTML.appendChild(conteudoPrioridade);
                linhaHTML.appendChild(colunaPrioridadeHTML);   
                
                var colunaDataHTML = document.createElement("td");
                var conteudoData = document.createTextNode(tabela[nrolinha].dataTarefa);
                colunaDataHTML.appendChild(conteudoData);
                linhaHTML.appendChild(colunaDataHTML);   
                                
                tabelaBody.appendChild(linhaHTML);   

            }
            tabelaPrioridadeHTML.appendChild(tabelaHead);            
            tabelaPrioridadeHTML.appendChild(tabelaBody);
            body.appendChild(tabelaPrioridadeHTML);
            tabelaPrioridadeHTML.setAttribute("border","1");
           
            
        }    

    </script>

</body>

</html>